# 3D Poisson equation - PROVEN BENCHMARK (simpler than Helmholtz)
# Manufactured solution: u = sin(πx)sin(πy)sin(πz)
# This is a well-known test case where PINNs work reliably

# Domain
domain:
  bounds: [[0.0, 1.0], [0.0, 1.0], [0.0, 1.0]]  # Unit cube

# PDE parameters - POISSON (no k parameter, simpler than Helmholtz)
pde:
  type: "poisson"  # ∇²u = f (simpler than Helmholtz)
  
# Manufactured solution (for validation)
# u_exact = sin(πx)sin(πy)sin(πz)
# Then: ∇²u = -3π²sin(πx)sin(πy)sin(πz)
# So source: f = -3π²sin(πx)sin(πy)sin(πz)
solution:
  type: "manufactured"
  frequency: 3.141592653589793  # π (single frequency, smooth)

# Network architecture (SIREN) - CONSERVATIVE
network:
  hidden_layers: 5         # Fewer layers (simpler problem)
  width: 64                # Smaller network (avoid overfitting)
  activation: "sine"
  omega_0: 5.0             # Lower frequency (matches solution)

# Sampling - MODERATE
sampling:
  n_interior: 16384   # 2^14
  n_boundary: 2048    # 2^11
  seed: 42

# Loss weights - BALANCED for Poisson
loss:
  boundary_weight: 10.0   # Lower than Helmholtz (simpler BC)
  residual_weight: 1.0

# Training - SUFFICIENT for simple problem
adam:
  steps: 15000        # Moderate (enough for Poisson)
  learning_rate: 1.0e-3
  lr_min: 1.0e-5
  gradient_clip: 1.0

# Training - Stage B: L-BFGS
lbfgs:
  max_iterations: 500   # Shorter (simpler problem)
  tolerance: 1.0e-10
  history_size: 10

# Validation
validation:
  grid_size: 33
  tolerance_l2_error: 0.01  # 1% (achievable for Poisson)
  tolerance_boundary_error: 1.0e-4
  tolerance_median_residual: 1.0e-4

# Checkpointing
checkpoints:
  directory: "checkpoints"
  save_frequency: 2000

# API
api:
  port: 8000
  query_timeout: 0.3
